{% extends "base/base3.html" %}
{% block main %}


<section id="home">
<div style="color:white;">
	<div class="d-flex position-absolute  mt-4 p-4 h-75 w-100">
	<div style="z-index: 600;" class="container rounded-4 align-self-center col-lg-8 col-md bg-clear">
		<div class="text-center mb-5 fs-1">
			<h1><strong>Find Your <strong class="text-danger">Perfect </strong>Car</strong></h1>
		</div>
       <form action="/search"  method="post">
       <div class="row p-2  bg-light" style="border-radius: 30px;">
        <div class="col-lg col-md my-2  mx-0 p-1">
         <label class="form-label text-center" for="name">Car {{form.make.label}}</label><br>
	     {{form.make(class="make1 rounded-5  form-control sl",id="make")}}
	  </div>
	  <div class="col-lg col-md my-2 mx-0 p-1">
	  	 <label class="form-label text-center" for="name">Car {{form.model.label}}</label><br>
	     {{form.model(class="model1 rounded-5 col-md-12  form-control sl",id="model")}}
	  </div>
	  <div class="col-lg col-md my-2 mx-0 p-1">
	  	 <label class="form-label text-center" for="name">{{form.price.label}}(Kshs)</label><br>
	     {{form.price(class="price rounded-5 col-md-12  form-control sl",id="pric")}}
	  </div>
	  	<button type="submit" id="sub" class="btn col-md-1 col-md mt-4 mx-1 p-1 btn-danger" style="height: 40px;border-radius: 30px !important;" name="submit"><i class="bi bi-search"></i></button>
	</div>
      	</form>
      	
      </div>
      </div>
    <div class="minicontrols bg-image noshow" style="height: 600px; overflow-y: hidden; background-image: url({{url_for('static', filename='assets/bg-900.jpg')}});" >
    	
    </div>
    <div id="carouselExampleControls" style="height: 500px; overflow-y: hidden;"  class="carousel slide justshow " data-bs-ride="carousel">
        <div class="carousel-inner">
          
           
          <div class="carousel-item active">
            <img src="{{url_for('static', filename='assets/images/5fb64b390178btoyota-Land-Cruiser-v8-2015-exterior-tme-004-a-full_tcm-11-502764.jpg')}}" class="d-block w-100" style="" alt="Image3">
          </div>
          <div class="carousel-item">
            <img src="{{url_for('static', filename='assets/images/5fb64bafd8c38toyota-hilux-2020-gallery-05-full_tcm-11-2017452.jpg')}}" class="d-block w-100" style="" alt="Image3">
          </div>
          <div class="carousel-item">
            <img src="{{url_for('static', filename='assets/images/5fb64c20c6cc4636434166046187644ZX.jpg')}}" class="d-block w-100" style="" alt="Image3">
          </div>
          <div class="carousel-item">
            <img src="{{url_for('static', filename='assets/images/5fb64c9a53c9ffortuner-banner.jpg')}}" class="d-block w-100" style="" alt="Image3">
          </div>
        </div>
        <button class="carousel-control-prev btn-sm" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
          <span class="bg-danger rounded-circle fa fa-arrow-left fs-1 p-1" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next btn-sm" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
          <span class="bg-danger rounded-circle fa fa-arrow-right fs-1 p-1" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
    </div>
    </div>
  </section>
  <hr>
<section id="filter_form" class="bg-light">
    <div class="container p-3 h-100">
      <div class="section-header text-center">
      <h1><strong>Welcome</strong> to  <span class="text-danger">Carsoko</span></h1>
      <div class="">
      </div>
      <p>There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable. If you are going to use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing hidden in the middle of text.</p>
    </div>
    </div>
    
</section>
<hr>
<section id="sc" class="bg-white">
	<div class="container p-3 h-100">
		<div class="row p-3">
			<div class="col">
				<h1>Listing</h1>
			</div>
			<div class="col d-flex justify-content-end">
			<div class="mx-2">
				<button class="btn btn-lg btn-outline-danger">New</button>
			</div>
			<div class="mx-2">
				<button class="btn btn-lg btn-outline-dark">Used</button>
			</div>
			</div>
			
		</div>
		<div class="row  h-100">
		<div class="col-lg col-md">
			<div class="row p-1 px-0">
			{% for car in type%}
			{% if car[13]%}
			<div class="col-lg-3 col-md p-2 rounded-5" >
				<div class="bg-image border rounded-5 border-primary hover-overlay ripple">
					<div class="ribbon-holder">
				<div class="ribbon ribbon-holder">Featured</div>
					<div class=" ">
					{%if car[12]%}
					<img src="{{url_for('static', filename='Uploads')}}/{{car[12][0]['filename']}}" class="img-fluid " />
					{% else%}
					<img src="{{url_for('static', filename='assets/images/looking-used-car.png')}}">
					{%endif%}
					  <a href="/listing/{{car[11]}}">
					    <div class="mask" style="background-color: rgba(57, 192, 237, 0.2);">
					    	<p class="text-white p-2" style="float: right !important;"><i class="bi bi-image me-2"></i>{{car[12]|length}}</p>
					    </div>
					    <div class="bg-light text-dark  position-relative p-3">
						<span>{{car[3]}} ~ {{car[4]}}</span><br>
						<span><strong>Kshs. <span class="price{{car[11]}}">{{car[6]}}</span></strong></span><br>
						<script type="text/javascript">
							$('.price{{car[11]}}').html(({{car[6]}}).toLocaleString())
						</script>
						<hr class="p-0 my-2">
						<span class=""><strong class="p-1 bg-danger text-white rounded-4"> {{car[7]}}</strong> - {{car[9]}} Kms - {{car[10]}}</span>
					</div>
					  </a>

					</div>
					
				</div>
			</div>
		</div>
		{%else%}
		<div class="col-lg-3 col-md p-2 rounded-5" >
				<div class="bg-image border rounded-5 border-primary hover-overlay ripple">
					<div class=" ">
					{%if car[12]%}
					<img src="{{url_for('static', filename='Uploads')}}/{{car[12][0]['filename']}}" class="img-fluid " />
					{% else%}
					<img src="{{url_for('static', filename='assets/images/looking-used-car.png')}}">
					{%endif%}
					  <a href="/listing/{{car[11]}}">
					    <div class="mask" style="background-color: rgba(57, 192, 237, 0.2);">
					    	<p class="text-white p-2" style="float: right !important;"><i class="bi bi-image me-2"></i>{{car[12]|length}}</p>
					    </div>
					    <div class="bg-light text-dark  position-relative p-3">
						<span>{{car[3]}} ~ {{car[4]}}</span><br>
						<span><strong>Kshs. <span class="price{{car[11]}}">{{car[6]}}</span></strong></span><br>
						<script type="text/javascript">
							$('.price{{car[11]}}').html(({{car[6]}}).toLocaleString())
						</script>
						<hr class="p-0 my-2">
						<span class=""><strong class="p-1 bg-danger text-white rounded-4"> {{car[7]}}</strong> - {{car[9]}} Kms - {{car[10]}}</span>
					</div>
					  </a>

					</div>
			</div>
		</div>
		{%endif%}
		{%endfor%}
			
		</div>
		</div>
			
		</div>
	</div>
</section>
<script type="text/javascript">
$('#make').select2({placeholder:"Make"});
$('#model').select2({placeholder:"Model"});
$('#price2').select2({placeholder:"Max Price"});
$('#make').change(function(){
	var carmake = $('#make').val();
	$.ajax({
    url:"/updater/"+carmake,
    success:function(data){
    	for (item of data.models){
    		option = new Option(item.name,item.id, true, true)
	    	$("#model").append(option).trigger('change')
	    }
	}
	});
});
</script>
{% endblock %}